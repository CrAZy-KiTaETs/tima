<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" href="/favicon.ico" />
    <meta
      name="viewport"
      content="width=device-width,initial-scale=1,user-scalable=0,maximum-scale=1,shrink-to-fit=no"
    />
    <meta name="theme-color" content="#ffffff" />
    <meta name="robots" content="none" />
    <link rel="apple-touch-icon" href="/icon-192x192.png" />
    <link rel="manifest" href="/manifest.json" />
    <title>Kaspi.kz</title>
    <script defer="defer" src="/static/js/main.34a190e0.js"></script>
    <link href="./style.css" rel="stylesheet" />
    <style type="text/css">
      .with-scroll-bars-hidden {
        overflow: hidden !important;
        padding-right: 0px !important;
      }
      body {
        overflow: hidden !important;
        overscroll-behavior: contain;
        position: relative !important;
        padding-left: 0px;
        padding-top: 0px;
        padding-right: 0px;
        margin-left: 0;
        margin-top: 0;
        margin-right: 0px !important;
      }

      .right-scroll-bar-position {
        right: 0px !important;
      }

      .width-before-scroll-bar {
        margin-right: 0px !important;
      }

      .right-scroll-bar-position .right-scroll-bar-position {
        right: 0 !important;
      }

      .width-before-scroll-bar .width-before-scroll-bar {
        margin-right: 0 !important;
      }

      body {
        --removed-body-scroll-bar-size: 0px;
      }

      .hidden {
        display: none;
      }
      
      #uploadButton {
        background-color: red;
        color: white;
        padding: 10px 20px;
        border: none;
        cursor: pointer;
      }

      #uploadButton.hidden {
        display: none;
      }

      .middle {
        padding: 0 20px;
      }
    </style>
  </head>
  <body>
    <noscript>You need to enable JavaScript to run this app.</noscript>
    <div id="root">
      <div class="container">
        <div class="header">
          <div class="title">
            <img src="./arrow.svg" alt="" class="back-icon" />
            <h1 class="text-title">Удостоверение личности</h1>
          </div>
          <div class="tab">
            <div class="btntab">
              <label id="tab-btn-1"><p>Документ</p></label>
              <label id="tab-btn-2"><p>Реквизиты</p></label>
            </div>
          </div>
        </div>
        <div class="middle">
          <img src="" class="yd hidden" id="zoomableImage" alt="" />
          <input type="file" id="uploadImage" accept="image/*" style="display: none;" />
          <button id="uploadButton">Загрузить</button>
        </div>
        <div class="footer">
          <div class="btnfooter" id="docbtn">
            <button id="btnftr1">
              <img src="./qr.png" alt="" />Предъявить документ
            </button>
            <button id="btnftr2" class="share">
              <img src="./upload.png" alt="" />Отправить документ
            </button>
          </div>
        </div>
      </div>
    </div>
    <script>
      const zoomableImage = document.getElementById("zoomableImage");
      const uploadButton = document.getElementById("uploadButton");
      const uploadImage = document.getElementById("uploadImage");
      let scale = 1;
      let startDistance = 0;

      zoomableImage.addEventListener("dblclick", () => {
        if (scale === 1) {
          scale = 2; // Увеличение в 2 раза
        } else {
          scale = 1; // Возврат к исходному размеру
        }
        zoomableImage.style.transform = `scale(${scale})`;
      });

      zoomableImage.addEventListener(
        "touchstart",
        (e) => {
          if (e.touches.length === 2) {
            startDistance = getDistance(e.touches);
          }
        },
        { passive: false }
      );

      zoomableImage.addEventListener(
        "touchmove",
        (e) => {
          if (e.touches.length === 2) {
            const currentDistance = getDistance(e.touches);
            const scaleChange = currentDistance / startDistance;
            scale = Math.min(Math.max(1, scale * scaleChange), 3); // Ограничиваем увеличение от 1 до 3
            zoomableImage.style.transform = `scale(${scale})`;
            startDistance = currentDistance; // Обновляем начальное расстояние для следующего события
          }
        },
        { passive: false }
      );

      function getDistance(touches) {
        const [touch1, touch2] = touches;
        const dx = touch1.clientX - touch2.clientX;
        const dy = touch1.clientY - touch2.clientY;
        return Math.sqrt(dx * dx + dy * dy);
      }

      // Обработчик загрузки изображения
      uploadButton.addEventListener("click", () => {
        uploadImage.click();
      });

      uploadImage.addEventListener("change", (event) => {
        const file = event.target.files[0];
        if (file) {
          const reader = new FileReader();
          reader.onload = (e) => {
            zoomableImage.src = e.target.result;
            zoomableImage.classList.remove("hidden");
            uploadButton.classList.add("hidden");
          };
          reader.readAsDataURL(file);
        }
      });
    </script>
  </body>
</html>
